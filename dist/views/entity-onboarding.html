<section class="ad-bg-white ad-border-b-1 ad-border-gray-shadeOne">
    <section class="ad-container ad-py-24 ad-flex ad-justify-between">
        <h3 class="ad-text-22 ad-text-blue-header">Register Reporting Entity</h3>
    </section>
</section>

<section>
    <section style="width: 647px; margin: 0 auto;">
        <section class="ad-pt-32 ad-mb-24">
            <h3 data-handler="re-child-slide-up" class="slider-activator-custom ad-flex ad-justify-between ad-text-blue-header ad-text-18 ad-font-bold ad-border-b-1 ad-border-gray-shadeOne ad-py-8 ad-leading-20">
                <label>Reporting entity information</label>
                <span class="">
                    <svg class="ad-inline" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        xmlns="http://www.w3.org/2000/svg">
                        <path fill-rule="evenodd" clip-rule="evenodd"
                            d="M12 7.5L19.5 15L18.45 16.05L12 9.6L5.55 16.05L4.5 15L12 7.5Z" fill="black" />
                    </svg>

                </span>
            </h3>
        </section>
        <form id="entity-onboarding" method="POST" action="/companyonboarding" autocomplete="off">
            <div class="re-child-slide-up">
                <p class="ad-mb-32">
                    <label class="ad-text-blue-header ad-mb-4 ad-leading-20 ad-block ad-font-bold">Reporting Entity
                        Name</label>
                    <input id="unique-entity-name" name="entity-name" class="ad-block ad-border-solid ad-border-1 ad-border-gray-shadeOne ad-rounded-2 ad-w-full ad-p-12 ad-text-blue-header ad-mb-8" type="text" data-error-default="entity name" placeholder="Entity Name" data-validation-type="alphanumericSpace">
                </p>
            </div>
            <section class="ad-mb-16">
                <h3 class="ad-text-blue-header ad-text-18 ad-font-bold ad-border-b-1 ad-border-gray-shadeOne ad-py-8 ad-leading-20">
                    Primary user information
                </h3>
            </section>
            <p class="ad-text-blue-shadeFive">There can be a maximum of 2 primary users for a registered reporting entity.
            </p>
            <section id="primaryUser">

            </section>
            <label id="add-PrimaryUser" class="ad-text-blue-shadeFour ad-cursor-pointer ad-text-12 ad-flex ad-items-center">
                <svg class="ad-inline ad-mr-8" width="16" height="16" viewBox="0 0 16 16" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd"
                        d="M8 1C4.2 1 1 4.2 1 8C1 11.8 4.2 15 8 15C11.8 15 15 11.8 15 8C15 4.2 11.8 1 8 1ZM12 9H9V12H7V9H4V7H7V4H9V7H12V9Z"
                        fill="#0051A2" />
                </svg>
                Add another primary user</label>

            <section style="height: 0;" class="ad-my-40 ad-text-12 ad-text-center ad-border-solid ad-border-b-1 ad-border-blue-shadeOne">
                <label id="add-issuer-label" class="ad-px-24 ad-cursor-pointer ad-relative ad-text-blue-shadeFour ad-inline-block ad-bg-gray-shadeThree" style="top:-12px;">
                        <svg class="ad-inline ad-mr-4" width="16" height="16" viewBox="0 0 16 16" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M8 1C4.2 1 1 4.2 1 8C1 11.8 4.2 15 8 15C11.8 15 15 11.8 15 8C15 4.2 11.8 1 8 1ZM12 9H9V12H7V9H4V7H7V4H9V7H12V9Z"
                                fill="#0051A2" />
                        </svg> 
                        <span>Add Issuer</span>
                    </label>

                <label id="remove-issuer-label" class="ad-px-24 ad-cursor-pointer ad-hidden ad-relative ad-text-blue-shadeFour ad-inline-block ad-bg-gray-shadeThree" style="top:-12px;">
                        <svg class="ad-inline ad-mr-4" width="16" height="16" viewBox="0 0 16 16" fill="none"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd" clip-rule="evenodd"
                                d="M14 8C14 4.7 11.3 2 8 2C4.7 2 2 4.7 2 8C2 11.3 4.7 14 8 14C11.3 14 14 11.3 14 8ZM11 7H5V9H11V7Z"
                                fill="#0051A2" />
                        </svg>
                
                        <span>Remove Issuer</span>
                    </label>
            </section>

            <!-- Issuer Container Starts here -->

            <div id="issuerDropDownContainer">

            </div>



            <p class="ad-text-blue-shadeTwo ad-flex ad-items-center ad-pt-40 ad-mt-16">
                <input data-field="required" type="checkbox" class="ad-mr-8 ad-inline-block"> I confirm I want to register this entity and add a primary user as well
            </p>
            <p class="ad-flex ad-justify-end ad-py-32">
                <button class="ad-text-blue-shadeFour ad-font-semibold ad-text-12 ad-border-solid ad-border-1 ad-border-blue-shadeFour ad-rounded-2 ad-py-8 ad-px-12 ad-mr-16">Cancel</button>
                <button type="submit" class="ad-bg-blue-shadeFour ad-text-white ad-text-12 ad-py-8 ad-px-12 ad-rounded-2">Submit</button>
            </p>
        </form>
    </section>
</section>
<section id="succes-message-report" class="ad-hidden">
    <section class="ad-py-40 ad-px-24 ad-bg-white ad-mb-16 ad-text-center">
        <h4 class="ad-text-18 ad-font-semibold ad-mb-8 ad-text-blue-header">Reporting Entity Registered</h4>
        <p class="ad-text-blue-shadeFive ad-mb-20"><label id="success-message-onboarding"></label> has been registered successfully. A login link has been shared with the registered emal ID of the primary user(s).</p>
        <a href="/" class="ad-text-blue-shadeFour ad-font-semibold ad-text-12 ad-border-solid ad-border-1 ad-border-blue-shadeFour ad-rounded-2 ad-py-8 ad-px-12">Close</a>
    </section>
</section>

<section id="disclosureType" class="ad-hidden">
    <ul>
        <li><a data-value="1e" href="">Option</a></li>
        <li><a data-value="2" href="">Option</a></li>
        <li><a data-value="3" href="">Option</a></li>
        <li><a data-value="4" href="">Option</a></li>
        <li><a data-value="5" href="">Option</a></li>
        <li><a data-value="6" href="">Option</a></li>
        <li><a data-value="7" href="">Option</a></li>
    </ul>
</section>


<ul id="issuerListData" class="ad-hidden">
    <li>
        <a data-value="data1" href="" class="ad-border-solid ad-border-b-1 ad-border-gray-shadeOne applyEllipsis"><img class="ad-inline" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACnSURBVHgB7ZSxDYMwEEW/D1OAKIyUAewRMkI2yAiMlhGyQUbICGYEK0RQYKzcRRRpjVIhXmVZuie7uKfAeO8NUer4aJBHSInuzrlescSWJR513dii0FmWZYkYx3c/zzhrIlxF0rYnbMQOw6sjIJncl/yyzhrCnzhEh2i3IgoxRmxlnQ2SEcMZeVZVY7XOW16RTNM3IxclF9IkyYmUIMvEv0kJNw5b+ADtBziryk+hcQAAAABJRU5ErkJggg=="
                alt=""> <span class="ad-relative ad-ml-4 ad-w-full applyEllipsis" style="top: 1px;">Some Data</span></a>
    </li>
    <li>
        <a data-value="data2" href="" class="ad-border-solid ad-border-b-1 ad-border-gray-shadeOne applyEllipsis"><img class="ad-inline" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACnSURBVHgB7ZSxDYMwEEW/D1OAKIyUAewRMkI2yAiMlhGyQUbICGYEK0RQYKzcRRRpjVIhXmVZuie7uKfAeO8NUer4aJBHSInuzrlescSWJR513dii0FmWZYkYx3c/zzhrIlxF0rYnbMQOw6sjIJncl/yyzhrCnzhEh2i3IgoxRmxlnQ2SEcMZeVZVY7XOW16RTNM3IxclF9IkyYmUIMvEv0kJNw5b+ADtBziryk+hcQAAAABJRU5ErkJggg=="
                alt=""> <span class="ad-relative ad-ml-4 ad-w-full applyEllipsis" style="top: 1px;">Some Data 2</span></a>
    </li>
    <li>
        <a data-value="date3" href="" class="ad-border-solid ad-border-b-1 ad-border-gray-shadeOne applyEllipsis"><img class="ad-inline" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACnSURBVHgB7ZSxDYMwEEW/D1OAKIyUAewRMkI2yAiMlhGyQUbICGYEK0RQYKzcRRRpjVIhXmVZuie7uKfAeO8NUer4aJBHSInuzrlescSWJR513dii0FmWZYkYx3c/zzhrIlxF0rYnbMQOw6sjIJncl/yyzhrCnzhEh2i3IgoxRmxlnQ2SEcMZeVZVY7XOW16RTNM3IxclF9IkyYmUIMvEv0kJNw5b+ADtBziryk+hcQAAAABJRU5ErkJggg=="
                alt=""> <span class="ad-relative ad-ml-4 ad-w-full applyEllipsis" style="top: 1px;">Some Data 3</span></a>
    </li>
    <li>
        <a data-value="c5kned2a5b7+6dsmfjt/OCOfnnOa/n9g/PV2gxvzEtvrCs58bjca8A==" href="" class="ad-border-solid ad-border-b-1 ad-border-gray-shadeOne applyEllipsis"><img class="ad-inline" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACnSURBVHgB7ZSxDYMwEEW/D1OAKIyUAewRMkI2yAiMlhGyQUbICGYEK0RQYKzcRRRpjVIhXmVZuie7uKfAeO8NUer4aJBHSInuzrlescSWJR513dii0FmWZYkYx3c/zzhrIlxF0rYnbMQOw6sjIJncl/yyzhrCnzhEh2i3IgoxRmxlnQ2SEcMZeVZVY7XOW16RTNM3IxclF9IkyYmUIMvEv0kJNw5b+ADtBziryk+hcQAAAABJRU5ErkJggg=="
                alt=""> <span class="ad-relative ad-ml-4 ad-w-full applyEllipsis" style="top: 1px;">Stadeos ds</span></a>
    </li>
    <li>
        <a data-value="c5kned2a5b7+6dsmfjt/OCOfnnOa/n9g/PsddsfV2gxvzEtvrCs58bjca8A==" href="" class="ad-border-solid ad-border-b-1 ad-border-gray-shadeOne applyEllipsis"><img class="ad-inline" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAABWzo5XAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAACnSURBVHgB7ZSxDYMwEEW/D1OAKIyUAewRMkI2yAiMlhGyQUbICGYEK0RQYKzcRRRpjVIhXmVZuie7uKfAeO8NUer4aJBHSInuzrlescSWJR513dii0FmWZYkYx3c/zzhrIlxF0rYnbMQOw6sjIJncl/yyzhrCnzhEh2i3IgoxRmxlnQ2SEcMZeVZVY7XOW16RTNM3IxclF9IkyYmUIMvEv0kJNw5b+ADtBziryk+hcQAAAABJRU5ErkJggg=="
                alt=""> <span class="ad-relative ad-ml-4 ad-w-full applyEllipsis" style="top: 1px;">Stadeos</span></a>
    </li>
</ul>

<script>
    // This carries the data-value for selected list
    var selectedIssuerList = [];
    //   This carries the data-id for selected list
    var selectedIssuerIDList = []


    var payload = {
        "reportingEntity": {
            "Title": "",
            "userRegisterInformation": [{
                "FirstName": "",
                "LastName": "",
                "Email": "",
                "PhoneNumber": "",
                "JobTitle": ""
            }]
        }
    };

    function validateREOnboardingForm(event) {
        debugger
        let userDetails = event.target.querySelectorAll('#primaryUser > section');
        let userList = [];
        userDetails.forEach((element, index) => {
            let inputs = element.querySelectorAll("input");
            let details = {}
            inputs.forEach((elem) => {
                if (elem.name == "first-name") {
                    details.FirstName = elem.value
                } else if (elem.name == "last-name") {
                    details.LastName = elem.value;
                } else if (elem.name == "email-address") {
                    details.Email = elem.value
                } else if (elem.name == "phone") {
                    details.PhoneNumber = elem.value
                } else if (elem.name == "designation") {
                    details.JobTitle = elem.value
                }
            })
            userList[index] = details;
        });

        payload.reportingEntity.userRegisterInformation = userList;
        let entityName = document.getElementById("unique-entity-name").value
        payload.reportingEntity.Title = entityName;

        console.log(payload.reportingEntity)

        // if api success
        $("#succes-message-report").removeClass('ad-hidden').addClass('ad-flex')
        $("#success-message-onboarding").text(entityName)
        event.preventDefault()
    }

    function getSecurityList(issuerListArray) {
        return new Promise((resolve, reject) => {
            let data = [{
                "item": null,
                "SecurityId": "{5000FAEB-4183-4B7B-977F-EDAF996544D8}",
                "SecurityName": "Stadeos Security",
                "MICCode": "STADEOSMIC",
                "Ticker": "STADEOSTICKER",
                "SecurityType": "Equity",
                "SecurityTypeID": "{99DD2F97-7CDE-4BA4-8D4A-481AC02A4A59}",
                "ReportingEntityName": null,
                "ReportingEntityId": null,
                "IssuerId": null,
                "IsActive": false,
                "ISINCode": "STADEOSISIN",
                "Status": "active",
                "StatusID": "{61969D43-075F-45FE-9C31-826A7F4AEA4D}",
                "Couponrate": "",
                "MaturityDate": "20200902T183000Z"
            }, {
                "item": null,
                "SecurityId": "{5F7DCC7A-C5E9-48F7-A94E-E66F6631DCB7}",
                "SecurityName": "Stadeos Security Two",
                "MICCode": "STADEOSMIC",
                "Ticker": "STADEOSTICKER",
                "SecurityType": "Debenture",
                "SecurityTypeID": "{907434B5-FC80-47D9-A5C5-021A301ED844}",
                "ReportingEntityName": null,
                "ReportingEntityId": null,
                "IssuerId": null,
                "IsActive": false,
                "ISINCode": "STADEOSISIN",
                "Status": "listed",
                "StatusID": "{FED7CC22-5CC5-4F74-9DC8-B843BC7F493C}",
                "Couponrate": "STADEOS",
                "MaturityDate": "20200929T183000Z"
            }]

            resolve(data)

        })
    }
</script>